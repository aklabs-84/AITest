<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI í™œìš© ì§„ë‹¨ í…ŒìŠ¤íŠ¸</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tone.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <!-- Inter í°íŠ¸ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #e0f2fe, #fff1f2);
            color: #1e293b;
        }
        .container {
            max-width: 800px;
        }
        
        /* ì‹œì‘ í™”ë©´ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-30px); }
            60% { transform: translateY(-15px); }
        }

        .title-animation {
            animation: bounce 2s infinite;
        }
        
        .progress-bar-container {
            width: 100%;
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 9999px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #3b82f6;
            transition: width 0.5s ease-in-out;
            border-radius: 9999px;
        }

        /* ê²°ê³¼ í™”ë©´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .primary-btn {
            background: linear-gradient(to right, #3b82f6, #ec4899);
            color: white;
            font-weight: bold;
            padding: 12px 32px;
            border-radius: 9999px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            transform: scale(1);
        }

        .primary-btn:hover {
            background: linear-gradient(to right, #2563eb, #db2777);
            transform: scale(1.05);
        }

        .secondary-btn {
            background: linear-gradient(to right, #d1d5db, #9ca3af);
            color: #1f2937;
            font-weight: bold;
            padding: 12px 32px;
            border-radius: 9999px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            transform: scale(1);
        }

        .secondary-btn:hover {
            background: linear-gradient(to right, #9ca3af, #6b7280);
            transform: scale(1.05);
        }
        
        /* ê²°ê³¼ í™”ë©´ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in-element {
            animation: fadeIn 0.8s ease-in-out forwards;
        }

        /* ì´ëª¨ì§€ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes tada {
            from {
                transform: scale3d(1, 1, 1);
            }

            10%, 20% {
                transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg);
            }

            30%, 50%, 70%, 90% {
                transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg);
            }

            40%, 60%, 80% {
                transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg);
            }

            to {
                transform: scale3d(1, 1, 1);
            }
        }
        .emoji-animation {
            animation: tada 1.5s infinite;
        }

        /* ì¶”ê°€ëœ ê²°ê³¼ í™”ë©´ ë‹¤ì´ë‚˜ë¯¹ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes slideInUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes zoomIn {
            from {
                transform: scale(0.3);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes rotateIn {
            from {
                transform: rotate(-200deg);
                opacity: 0;
            }
            to {
                transform: rotate(0);
                opacity: 1;
            }
        }

        .slide-in-up {
            animation: slideInUp 0.8s ease-out forwards;
        }

        .zoom-in {
            animation: zoomIn 0.6s ease-out forwards;
        }

        .rotate-in {
            animation: rotateIn 0.8s ease-out forwards;
        }

        /* ì´ë¦„ ì…ë ¥ í•„ë“œ ì˜¤ë¥˜ ìŠ¤íƒ€ì¼ */
        .error-border {
            border-color: #ef4444 !important;
            box-shadow: 0 0 0 1px #ef4444 !important;
        }

        .error-shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        /* ë³µì‚¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .copy-btn {
            background: linear-gradient(to right, #10b981, #059669);
            color: white;
            font-weight: bold;
            padding: 16px 48px;
            border-radius: 16px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            transition: all 0.3s ease;
            transform: scale(1);
            border: none;
            cursor: pointer;
        }

        .copy-btn:hover {
            background: linear-gradient(to right, #047857, #065f46);
            transform: scale(1.05);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
        }

        /* ì €ì¥ ìƒíƒœ ì•Œë¦¼ */
        .save-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transform: translateX(calc(100% + 20px));
            transition: transform 0.3s ease-in-out;
            z-index: 1000;
            font-weight: 600;
            opacity: 0;
            visibility: hidden;
        }

        .save-notification.show {
            transform: translateX(0);
            opacity: 1;
            visibility: visible;
        }

    </style>
</head>
<body>
    <!-- ì €ì¥ ìƒíƒœ ì•Œë¦¼ -->
    <div id="save-notification" class="save-notification">
        <span id="save-message">ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!</span>
    </div>

    <!-- ë©”ì¸ ì•± ì»¨í…Œì´ë„ˆ -->
    <div id="app" class="min-h-screen flex items-center justify-center p-4">

        <!-- ì‹œì‘ í™”ë©´ -->
        <div id="start-screen" class="container text-center flex flex-col items-center justify-center space-y-8">
            <div class="title-animation">
                <h1 class="text-6xl font-bold text-blue-600 drop-shadow-md">AI í™œìš© ì§„ë‹¨ í…ŒìŠ¤íŠ¸</h1>
                <p class="mt-4 text-xl font-medium text-gray-700">ë‚˜ëŠ” ê³¼ì—° ì¸ê³µì§€ëŠ¥ì„ ì–¼ë§ˆë‚˜ ì˜ í™œìš©í•˜ê³  ìˆì„ê¹Œ?</p>
            </div>
            <div class="w-full max-w-sm flex flex-col items-center">
                <label for="user-name-input" class="mb-2 text-lg font-medium text-gray-700">ì°¸ì—¬ì ì´ë¦„ ì…ë ¥ í˜•ì‹: ì´ë¦„+ì§ì±…</label>
                <input type="text" id="user-name-input" placeholder="í™ê¸¸ë™ ëŒ€í‘œ" class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 text-center text-lg shadow-sm">
                <p id="name-error" class="text-red-500 text-sm mt-2 hidden">ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!</p>
            </div>
            <!-- ì‹œì‘ ë²„íŠ¼ì— í•˜ì–€ìƒ‰ ë°°ê²½ê³¼ íŒŒë€ìƒ‰ í…Œë‘ë¦¬ ì§ì ‘ ì ìš© -->
            <button id="start-btn" class="bg-white border-2 border-blue-400 text-blue-600 font-medium py-4 px-6 rounded-xl shadow-md transition-all duration-200 hover:bg-blue-400 hover:text-white hover:shadow-lg transform hover:scale-105">
                ì§„ë‹¨ ì‹œì‘í•˜ê¸°
            </button>
        </div>

        <!-- ë¬¸ì œ í™”ë©´ -->
        <div id="quiz-screen" class="container hidden flex-col items-center justify-center space-y-6">
            <!-- ì§„í–‰ë„ ë°” -->
            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar" style="width: 0%;"></div>
            </div>
            <!-- í˜„ì¬ ë¬¸ì œ ë²ˆí˜¸ -->
            <p id="current-question-number" class="text-sm font-semibold text-gray-500 self-start">ë¬¸ì œ 1/8</p>
            <!-- ë¬¸ì œ í…ìŠ¤íŠ¸ -->
            <div class="flex-grow flex items-center justify-center text-center p-4">
                <h2 id="question-text" class="text-2xl md:text-3xl font-semibold text-gray-900 leading-relaxed">ë¬¸ì œ í…ìŠ¤íŠ¸</h2>
            </div>
            <!-- ë‹µë³€ ë²„íŠ¼ë“¤ -->
            <div id="answer-buttons" class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                <!-- ë‹µë³€ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤. -->
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="result-screen" class="container hidden text-center flex-col items-center justify-center space-y-8">
            <h2 id="result-title" class="text-3xl md:text-5xl font-bold text-gray-800 slide-in-up" style="animation-delay: 0s;"></h2>
            <p id="result-text" class="text-xl md:text-2xl font-medium text-gray-600 zoom-in" style="animation-delay: 0.3s;"></p>
            <div id="result-animation" class="text-7xl emoji-animation rotate-in" style="animation-delay: 0.6s;"></div>
            <div id="result-details" class="max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg fade-in-element" style="animation-delay: 0.9s;">
                <div id="result-content" class="text-gray-700 leading-relaxed"></div>
            </div>
            <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 justify-center items-center fade-in-element" style="animation-delay: 1.2s;">
                <button id="copy-btn" class="copy-btn">
                    ê²°ê³¼ ë³µì‚¬í•˜ê¸°
                </button>
                <button id="restart-btn" class="primary-btn">
                    ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•˜ê¸°
                </button>
            </div>
        </div>
    </div>

    <script>
  // DOM ìš”ì†Œ
  const startScreen = document.getElementById('start-screen');
  const quizScreen = document.getElementById('quiz-screen');
  const resultScreen = document.getElementById('result-screen');
  const userNameInput = document.getElementById('user-name-input');
  const nameError = document.getElementById('name-error');
  const startBtn = document.getElementById('start-btn');
  const progressBar = document.getElementById('progress-bar');
  const currentQuestionNumber = document.getElementById('current-question-number');
  const questionText = document.getElementById('question-text');
  const answerButtons = document.getElementById('answer-buttons');
  const resultTitle = document.getElementById('result-title');
  const resultText = document.getElementById('result-text');
  const resultAnimation = document.getElementById('result-animation');
  const resultDetails = document.getElementById('result-details');
  const resultContent = document.getElementById('result-content');
  const copyBtn = document.getElementById('copy-btn');
  const restartBtn = document.getElementById('restart-btn');
  const saveNotification = document.getElementById('save-notification');
  const saveMessage = document.getElementById('save-message');

  // ì „ì—­ ìƒíƒœ
  const questions = [
    { question: "ì—…ë¬´ ì¤‘ ìƒˆë¡œìš´ ë¬¸ì œë¥¼ ë§ˆì£¼í–ˆì„ ë•Œ,<br>AIë¥¼ í™œìš©í•´ í•´ê²°ì±…ì„ ì°¾ëŠ” ë¹ˆë„ëŠ”?", options: ["A. ê±°ì˜ ë§¤ì¼","B. ê°€ë” í•„ìš”í•  ë•Œë§Œ","C. 1ë…„ì— ëª‡ ë²ˆ","D. ì „í˜€ ì•ˆ í•¨"] },
    { question: "ì•„ë˜ ì¤‘ ë‚´ê°€ ì§€ë‚œ 1ê°œì›” ì•ˆì— ì‚¬ìš©í•´ë³¸ AI íˆ´ì˜ ìˆ˜ëŠ”?", options: ["A. 5ê°œ ì´ìƒ","B. 3~4ê°œ","C. 1~2ê°œ","D. ì—†ìŒ"] },
    { question: "ë‚˜ì˜ ì—…ë¬´ ë„êµ¬(ì˜ˆ: Google Sheets, Slack, Notion ë“±)ì™€ <br>AIë¥¼ ì—°ë™í•´ ìë™í™”í•´ë³¸ ê²½í—˜ì€?", options: ["A. ìì£¼ ì‚¬ìš©","B. 1~2ë²ˆ ì‹œë„","C. ê³„íšë§Œ í•¨","D. ì „í˜€ ì•ˆ í•¨"] },
    { question: "AIë¥¼ ë‹¨ìˆœ ì§ˆì˜ì‘ë‹µì´ ì•„ë‹Œ 'ì½˜í…ì¸  ê¸°íš, ë””ìì¸, ì˜ìƒ ì œì‘, <br>ë¶„ì„' ë“± ì°½ì‘ ëª©ì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ë¹ˆë„ëŠ”?", options: ["A. ë§¤ìš° ìì£¼","B. ê°€ë”","C. ê±°ì˜ ì—†ìŒ","D. ì „í˜€ ì—†ìŒ"] },
    { question: "ìƒˆë¡œìš´ AI íˆ´ì´ë‚˜ ê¸°ëŠ¥ì´ ì¶œì‹œëì„ ë•Œ, <br>ì‚¬ìš©ë²•ì„ ì§ì ‘ ì°¾ì•„ë³´ê³  ì‹œë„í•˜ëŠ” í¸ì¸ê°€?", options: ["A. ë°”ë¡œ ì‚¬ìš©í•´ë´„","B. ëª‡ ì£¼ í›„ì— ì‹œë„","C. ë‰´ìŠ¤ë§Œ í™•ì¸","D. ì „í˜€ ê´€ì‹¬ ì—†ìŒ"] },
    { question: "AI ë•ë¶„ì— ì—…ë¬´ ì²˜ë¦¬ ì†ë„ê°€ ë¹¨ë¼ì¡Œë‹¤ê³  ëŠë‚€ ì •ë„ëŠ”?", options: ["A. ë§¤ìš° ë§ì´ ë‹¨ì¶•","B. ì•½ê°„ ë‹¨ì¶•","C. ë³€í™” ì—†ìŒ","D. ì˜¤íˆë ¤ ëŠë ¤ì§"] },
    { question: "ëª©ì ì— ë§ì¶° í”„ë¡¬í”„íŠ¸(ì§€ì‹œë¬¸)ë¥¼ <br>êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í•˜ëŠ” ë° ì–¼ë§ˆë‚˜ ìì‹  ìˆëŠ”ê°€?", options: ["A. ë§¤ìš° ìì‹  ìˆìŒ","B. ì–´ëŠ ì •ë„ ê°€ëŠ¥","C. ê°„ë‹¨í•œ ì§ˆë¬¸ë§Œ ê°€ëŠ¥","D. ê±°ì˜ ëª» í•¨"] },
    { question: "ë‹¤ë¥¸ ì‚¬ëŒì˜ ìš”ì²­(ë³´ê³ ì„œ, ìë£Œ ì¤€ë¹„ ë“±)ì„ <br>AIë¡œ ëŒ€ì‹  ì²˜ë¦¬í•´ ì¤€ ê²½í—˜ì€?", options: ["A. ìì£¼ ìˆìŒ","B. ëª‡ ë²ˆ ìˆìŒ","C. ê±°ì˜ ì—†ìŒ","D. ì „í˜€ ì—†ìŒ"] }
  ];
  const scores = [10, 5, 2, 0];

  // êµ¬ê¸€ ì•±ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ URL
  const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxe-s7Q3CPSxQ5cPBnaFWGAmvGipogLncluJVUW2nSpD067rPlW93jgbSP4LAYVMMhhfw/exec';

  let currentQuestionIndex = 0;
  let totalScore = 0;
  let userName = '';
  let finalResult = '';
  let resultLevel = '';        // ë³´ê°•: ì „ì—­ ì„ ì–¸
  let detailedMessage = '';    // ë³´ê°•: ì „ì—­ ì„ ì–¸
  let userAnswers = [];        // ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‹µë³€ ì €ì¥

  // ì €ì¥ ì•Œë¦¼ í‘œì‹œ í•¨ìˆ˜
  function showSaveNotification(message, isSuccess = true) {
    saveMessage.textContent = message;
    saveNotification.style.background = isSuccess 
      ? 'linear-gradient(135deg, #10b981, #059669)' 
      : 'linear-gradient(135deg, #ef4444, #dc2626)';
    saveNotification.classList.add('show');
    
    setTimeout(() => {
      saveNotification.classList.remove('show');
    }, 3000);
  }

  // Tone.js íš¨ê³¼ìŒ
  async function playStartSound() {
    await Tone.start();
    const synth = new Tone.Synth().toDestination();
    synth.triggerAttackRelease("C4", "8n");
    setTimeout(() => synth.triggerAttackRelease("E4", "8n"), 100);
    setTimeout(() => synth.triggerAttackRelease("G4", "8n"), 200);
  }
  async function playClickSound() {
    await Tone.start();
    const synth = new Tone.Synth().toDestination();
    synth.triggerAttackRelease("C5", "16n");
  }
  async function playResultSound(level) {
    await Tone.start();
    const synth = new Tone.Synth().toDestination();
    if (level === "AI ë§ˆìŠ¤í„°") {
      ["C4","E4","G4","C5"].forEach((n,i)=>setTimeout(()=>synth.triggerAttackRelease(n,"8n"), i*150));
    } else if (level === "AI í™œìš© ì¤‘ê¸‰ì") {
      setTimeout(()=>synth.triggerAttackRelease("G4","8n"),0);
      setTimeout(()=>synth.triggerAttackRelease("C5","8n"),200);
    } else if (level === "AI ì…ë¬¸ì") {
      synth.triggerAttackRelease("E4","4n");
    } else {
      synth.triggerAttackRelease("C4","4n");
    }
  }

  // ì‹œì‘
  async function startGame() {
    const name = userNameInput.value.trim();
    if (!name) {
      userNameInput.classList.add('error-border','error-shake');
      nameError.classList.remove('hidden');
      setTimeout(()=>userNameInput.classList.remove('error-shake'), 500);
      return;
    }
    userNameInput.classList.remove('error-border');
    nameError.classList.add('hidden');

    userName = name;
    await playStartSound();

    startScreen.classList.add('hidden');
    quizScreen.classList.remove('hidden');
    currentQuestionIndex = 0;
    totalScore = 0;
    userAnswers = []; // ë‹µë³€ ë°°ì—´ ì´ˆê¸°í™”
    showQuestion();
  }

  // ë¬¸ì œ í‘œì‹œ
  function showQuestion() {
    if (currentQuestionIndex >= questions.length) {
      showResult();
      return;
    }
    const q = questions[currentQuestionIndex];

    currentQuestionNumber.textContent = `ë¬¸ì œ ${currentQuestionIndex + 1}/${questions.length}`;
    const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
    progressBar.style.width = `${progress}%`;

    questionText.innerHTML = q.question;
    answerButtons.innerHTML = '';

    q.options.forEach((option, index) => {
      const button = document.createElement('button');
      button.textContent = option;
      button.classList.add(
        'bg-white','border-2','border-blue-400','text-blue-600','font-medium',
        'py-4','px-6','rounded-xl','shadow-md','transition-all','duration-200',
        'hover:bg-blue-400','hover:text-white','hover:shadow-lg','transform','hover:scale-105','text-left'
      );
      button.onclick = () => checkAnswer(index);
      answerButtons.appendChild(button);
    });
  }

  // ë‹µë³€ ì²˜ë¦¬
  async function checkAnswer(selectedIndex) {
    await playClickSound();
    
    // ì„ íƒí•œ ë‹µë³€ ì €ì¥ (A, B, C, D í˜•íƒœë¡œ)
    const answerLabel = ['A', 'B', 'C', 'D'][selectedIndex];
    userAnswers.push(answerLabel);
    
    totalScore += scores[selectedIndex];
    currentQuestionIndex++;
    showQuestion();
  }

  // ê²°ê³¼ í‘œì‹œ
  async function showResult() {
    quizScreen.classList.add('hidden');
    resultScreen.classList.remove('hidden');

    let resultMessage = '';
    let resultAnimationEmoji = '';

    if (totalScore >= 60) {
      resultLevel = "AI ë§ˆìŠ¤í„°";
      resultMessage = `${userName}ë‹˜ì€ AI í™œìš© ë ˆë²¨ ${resultLevel}ì…ë‹ˆë‹¤!`;
      resultAnimationEmoji = "ğŸš€";
      detailedMessage = `ì •ë§ ëŒ€ë‹¨í•´ìš”! AIë¥¼ ì—…ë¬´ì™€ ì°½ì‘ í™œë™ì— ëŠ¥ìˆ™í•˜ê²Œ í™œìš©í•˜ê³  ê³„ì‹œë„¤ìš”. ìƒˆë¡œìš´ AI ê¸°ìˆ ì— ëŒ€í•œ í˜¸ê¸°ì‹¬ê³¼ ì‹¤í–‰ë ¥ì´ ë›°ì–´ë‚˜ë©°, í”„ë¡¬í”„íŠ¸ ì‘ì„± ëŠ¥ë ¥ë„ í›Œë¥­í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œë„ AI ë¶„ì•¼ì˜ ì„ êµ¬ì ì—­í• ì„ í•´ì£¼ì„¸ìš”!`;
    } else if (totalScore >= 40) {
      resultLevel = "AI í™œìš© ì¤‘ê¸‰ì";
      resultMessage = `${userName}ë‹˜ì€ AI í™œìš© ë ˆë²¨ ${resultLevel}ì…ë‹ˆë‹¤!`;
      resultAnimationEmoji = "ğŸ‘";
      detailedMessage = `ì¢‹ì€ ìˆ˜ì¤€ì´ì—ìš”! AIë¥¼ ì¼ìƒ ì—…ë¬´ì— ì˜ í™œìš©í•˜ê³  ê³„ì‹œë©°, ì°½ì‘ í™œë™ì—ë„ ê´€ì‹¬ì„ ë³´ì´ê³  ìˆì–´ìš”. ì¡°ê¸ˆ ë” ë‹¤ì–‘í•œ AI ë„êµ¬ë¥¼ ì‹œë„í•´ë³´ê³  ìë™í™”ì— ë„ì „í•´ë³¸ë‹¤ë©´ ë§ˆìŠ¤í„° ë ˆë²¨ì— ë„ë‹¬í•  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”!`;
    } else if (totalScore >= 20) {
      resultLevel = "AI ì…ë¬¸ì";
      resultMessage = `${userName}ë‹˜ì€ AI í™œìš© ë ˆë²¨ ${resultLevel}ì…ë‹ˆë‹¤!`;
      resultAnimationEmoji = "ğŸ’¡";
      detailedMessage = `AI í™œìš©ì˜ ì²« ê±¸ìŒì„ ì˜ ë‚´ë””ë””ê³  ê³„ì„¸ìš”! ê¸°ë³¸ì ì¸ AI ë„êµ¬ ì‚¬ìš©ë²•ì„ ìµíˆê³ , ë” ìì£¼ AIë¥¼ í™œìš©í•´ë³´ì„¸ìš”. í”„ë¡¬í”„íŠ¸ ì‘ì„±ë²•ì„ ì—°ìŠµí•˜ê³  ë‹¤ì–‘í•œ AI ë„êµ¬ë“¤ì„ ì²´í—˜í•´ë³´ì‹œë©´ ì‹¤ë ¥ì´ í¬ê²Œ ëŠ˜ ê±°ì˜ˆìš”.`;
    } else {
      resultLevel = "AI ì´ˆë³´";
      resultMessage = `${userName}ë‹˜ì€ AI í™œìš© ë ˆë²¨ ${resultLevel}ì…ë‹ˆë‹¤!`;
      resultAnimationEmoji = "ğŸ£";
      detailedMessage = `AI í™œìš©ì˜ ìƒˆë¡œìš´ ì„¸ê³„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•´ìš”! ChatGPT, Claudeì™€ ê°™ì€ ê¸°ë³¸ AI ë„êµ¬ë¶€í„° ì‹œì‘í•´ë³´ì„¸ìš”. ê°„ë‹¨í•œ ì§ˆë¬¸ì´ë‚˜ ë²ˆì—­, ìš”ì•½ ì‘ì—…ë¶€í„° ì²œì²œíˆ ì‹œì‘í•˜ë©´ì„œ AIì˜ ë§¤ë ¥ì„ ë°œê²¬í•´ë³´ì‹œê¸¸ ë°”ë¼ìš”.`;
    }

    resultTitle.textContent = resultLevel;
    resultText.textContent = resultMessage;
    resultAnimation.textContent = resultAnimationEmoji;
    resultContent.textContent = detailedMessage;

    finalResult = `${resultLevel}\n\n${resultMessage}\n\n${detailedMessage}\n\nì ìˆ˜: ${totalScore}ì  / 80ì `;

    await playResultSound(resultLevel);
    await saveToSpreadsheet(); // ì €ì¥
  }

  // ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ì €ì¥
  async function saveToSpreadsheet() {
    try {
      const currentDate = new Date();
      const formattedDate = currentDate.toLocaleString('ko-KR', {
        year: 'numeric', month: '2-digit', day: '2-digit',
        hour: '2-digit', minute: '2-digit', second: '2-digit'
      });

      // 8ê°œ ë¬¸ì œì˜ ë‹µë³€ì„ ê°œë³„ í•„ë“œë¡œ ì¤€ë¹„
      const data = {
        timestamp: formattedDate,
        name: userName,
        resultTitle: resultLevel,
        resultContent: detailedMessage,
        score: `${totalScore}ì  / 80ì `,
        answer1: userAnswers[0] || '',
        answer2: userAnswers[1] || '',
        answer3: userAnswers[2] || '',
        answer4: userAnswers[3] || '',
        answer5: userAnswers[4] || '',
        answer6: userAnswers[5] || '',
        answer7: userAnswers[6] || '',
        answer8: userAnswers[7] || ''
      };

      // ë””ë²„ê¹…: ì „ì†¡í•  ë°ì´í„° í™•ì¸
      console.log('ì €ì¥í•  ë°ì´í„°:', data);
      console.log('ì‚¬ìš©ì ë‹µë³€ ë°°ì—´:', userAnswers);

      const res = await fetch(GOOGLE_APPS_SCRIPT_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'text/plain;charset=utf-8' },
        body: JSON.stringify(data),
      });

      if (res.ok) {
        const responseData = await res.json();
        const sheetName = responseData.sheetName || 'í•´ë‹¹ ë‚ ì§œ ì‹œíŠ¸';
        showSaveNotification(`${sheetName}ì— ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!`, true);
        console.log('ê²°ê³¼ ì €ì¥ ì™„ë£Œ:', responseData);
      } else {
        throw new Error(`HTTP ${res.status}`);
      }

    } catch (error) {
      console.error('ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ì €ì¥ ì¤‘ ì˜¤ë¥˜:', error);
      showSaveNotification('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', false);
    }
  }

  // ê²°ê³¼ ë³µì‚¬
  async function copyResult() {
    try {
      await navigator.clipboard.writeText(finalResult);
      const originalText = copyBtn.textContent;
      copyBtn.textContent = 'ë³µì‚¬ ì™„ë£Œ!';
      copyBtn.classList.add('bg-green-600');
      setTimeout(() => {
        copyBtn.textContent = originalText;
        copyBtn.classList.remove('bg-green-600');
      }, 2000);
      await playClickSound();
    } catch (err) {
      console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
      alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì €ê°€ ë³µì‚¬ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
    }
  }

  // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ(ì¤‘ë³µ ì œê±° ë²„ì „)
  startBtn.addEventListener('click', startGame);
  copyBtn.addEventListener('click', copyResult);
  restartBtn.addEventListener('click', () => {
    resultScreen.classList.add('hidden');
    startScreen.classList.remove('hidden');
    userNameInput.value = '';
    userAnswers = []; // ë‹µë³€ ì´ˆê¸°í™”
  });

  // ì—”í„°ë¡œ ì‹œì‘
  userNameInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') startGame();
  });

  // ì…ë ¥ ì‹œ ì—ëŸ¬ íŒíŠ¸ ì œê±°
  userNameInput.addEventListener('input', () => {
    if (userNameInput.value.trim()) {
      userNameInput.classList.remove('error-border');
      nameError.classList.add('hidden');
    }
  });
</script>

</body>
</html>
